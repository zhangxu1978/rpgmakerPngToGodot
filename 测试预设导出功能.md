# 测试预设导出功能

## 问题解决方案

刚才遇到的错误 `GET file:///D:/work/work/git/game/rpgmakerPngToGodot/renderer/48tile.json net::ERR_FILE_NOT_FOUND` 已经通过以下方式解决：

### 1. 文件路径问题
- **原因**: 渲染进程无法直接访问文件系统中的JSON文件
- **解决**: 将预设文件移动到 `renderer/` 目录下，并通过主进程API读取

### 2. 实现的修复
1. **移动预设文件**: 将 `9tile.json`, `16tile.json`, `48tile.json` 移动到 `renderer/` 目录
2. **添加主进程API**: 在 `main.js` 中添加 `fs:readPresetFile` 处理器
3. **更新preload.js**: 暴露 `readPresetFile` API
4. **修改app.js**: 使用新的API替代直接fetch

## 测试步骤

### 1. 启动应用
```bash
npm start
```

### 2. 准备测试图片
1. 打开一张图片（建议尺寸为48的倍数，如480x480）
2. 设置切图尺寸为48x48
3. 点击"切图"按钮进入预览界面

### 3. 测试预设导出
1. 在切图预览界面找到"预设导出"区域
2. 从下拉菜单选择预设（9tile/16tile/48tile）
3. 点击"导出预设图片"按钮
4. 选择保存位置

### 4. 验证结果
- **成功**: 应该能正常导出组合图片，无错误提示
- **失败**: 如果仍有错误，查看开发者工具控制台（F12）

## 错误排查

如果仍然遇到问题，请检查：

### 1. 文件是否存在
确认以下文件存在：
- `renderer/9tile.json`
- `renderer/16tile.json` 
- `renderer/48tile.json`

### 2. 查看控制台日志
按F12打开开发者工具，查看：
- 是否有"开始导出预设"日志
- 是否有"预设数据"和"预设文件路径"日志
- 任何错误信息

### 3. 预设文件格式
确认JSON文件格式正确：
```json
{
  "cols": 3,
  "rows": 3, 
  "cellData": [
    [1, 2, 3, 4],
    // ... 更多数据
  ]
}
```

## 预期行为

### 成功导出时应该看到：
1. 控制台显示: "开始导出预设: [预设名]"
2. 控制台显示: "预设数据: [JSON对象]"
3. 控制台显示: "预设文件路径: [文件路径]"
4. 弹出文件保存对话框
5. 状态栏显示: "[预设名]预设图片导出完成"

### 如果出错会看到：
1. 红色错误提示框（在预览界面顶部）
2. 错误弹窗
3. 控制台详细错误信息

现在应该可以正常使用预设导出功能了！